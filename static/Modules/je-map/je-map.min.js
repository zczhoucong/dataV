"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var _get=function e(t,a,r){if(t===null)t=Function.prototype;var i=Object.getOwnPropertyDescriptor(t,a);if(i===undefined){var n=Object.getPrototypeOf(t);if(n===null){return undefined}else{return e(n,a,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,a,r){if(a)e(t.prototype,a);if(r)e(t,r);return t}}();function _possibleConstructorReturn(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _inherits(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(function(e){var t={};function a(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,a);i.l=true;return i.exports}a.m=e;a.c=t;a.d=function(e,t,r){if(!a.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=2)})([function(e,t,a){"use strict";var r=function(){function e(t){_classCallCheck(this,e);this._id=null;this.attributes=null;this.map=null;this.jemap=null;this.opacity=1;this.source=null;this.visible=true;this.extent=null;this.zIndex=0;this.minResolution=0;this.maxResolution=20;this.minZoom=0;this.maxZoom=20;$.extend(this,t);this.handleFunc={};this.CLASS_NAME="x.layer.Base"}_createClass(e,[{key:"on",value:function e(t,a){if(this.handleFunc[t]){if(this.handleFunc[t].indexOf(a)===-1){this.handleFunc[t].push(a)}}else{this.handleFunc[t]=[a]}}},{key:"trigger",value:function e(t,a){try{var r=this.handleFunc[t];var i=r.length;for(var n=0;n<i;n++){r[n](a)}return true}catch(e){console.error(e);return false}}},{key:"off",value:function e(t,a){try{var r=this.handleFunc[t];var i=r.indexOf(a);if(i===-1)throw error;r.splice(i,1)}catch(e){console.error(e)}}},{key:"once",value:function e(t,a){this.on(t,a)?this.off(t,a):null}},{key:"setVisible",value:function e(t){var a=this.jemap.delegate_map;a.setLayoutProperty("overlayer_"+this.id,"visibility",t?"visible":"none")}},{key:"getZIndex",value:function e(){return this.zIndex}},{key:"setZIndex",value:function e(t){this.zIndex=t;var a=this.jemap.layers;for(var r=0;r<a.length;r++){if(a[r].id!=this.id){var i=a[r].zIndex<t;var n=this._getMoveLayerIds(a[r],i);if(n.length==0)continue;this.map.moveLayer(n[0],n[1])}}}},{key:"_getMoveLayerIds",value:function e(t,a){var r=[],i=this.CLASS_NAME,n=this.jemap._getMoveLayerId;if(a){r=[n(t,a),n(this,a)]}else{r=[n(this,a),n(t,a)]}return r}},{key:"clone",value:function e(){return _.cloneDeep(this)}}]);return e}();t["a"]=r},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));$.extend(a,e);return _possibleConstructorReturn(a);a.source=e.source;a.dataSet=e.mapVOptions;a.mapVOptions=e.mapVOptions;return a}_createClass(t,[{key:"drawAnimation",value:function e(){var t=this.ctx;var a=this.data;if(!a){return}t.save();t.globalCompositeOperation="destination-out";t.fillStyle="rgba(0, 0, 0, .1)";t.fillRect(0,0,t.canvas.width,t.canvas.height);t.restore();t.save();if(this.options.shadowColor){t.shadowColor=this.options.shadowColor}if(this.options.shadowBlur){t.shadowBlur=this.options.shadowBlur}if(this.options.globalAlpha){t.globalAlpha=this.options.globalAlpha}if(this.options.globalCompositeOperation){t.globalCompositeOperation=this.options.globalCompositeOperation}var r=this.options;for(var i=0;i<a.length;i++){if(a[i].geometry.type==="Point"){t.beginPath();var n=a[i].size||this.options.size;var o=a[i].minSize||this.options.minSize||0;if(a[i]._size===undefined){a[i]._size=o}t.arc(a[i].geometry._coordinates[0],a[i].geometry._coordinates[1],a[i]._size,0,Math.PI*2,true);t.closePath();a[i]._size++;if(a[i]._size>n){a[i]._size=o}t.lineWidth=1;t.strokeStyle=a[i].strokeStyle||a[i]._strokeStyle||r.strokeStyle||"yellow";t.stroke();var s=a[i].fillStyle||a[i]._fillStyle||r.fillStyle;if(s){t.fillStyle=s;t.fill()}}else if(a[i].geometry.type==="LineString"){t.beginPath();var l=a[i].size||this.options.size||5;var o=a[i].minSize||this.options.minSize||0;if(a[i]._index===undefined){a[i]._index=0}var c=a[i]._index;t.arc(a[i].geometry._coordinates[c][0],a[i].geometry._coordinates[c][1],l,0,Math.PI*2,true);t.closePath();a[i]._index++;if(a[i]._index>=a[i].geometry._coordinates.length){a[i]._index=0}var u=a[i].strokeStyle||r.strokeStyle;var s=a[i].fillStyle||r.fillStyle||"yellow";t.fillStyle=s;t.fill();if(u&&r.lineWidth){t.lineWidth=r.lineWidth||1;t.strokeStyle=u;t.stroke()}}}t.restore()}},{key:"_createCanvas",value:function e(){var t=document.createElement("canvas");t.id=this.layerID;t.style.position="absolute";t.style.top=0+"px";t.style.left=0+"px";t.width=parseInt(this.map.getCanvas().style.width);t.height=parseInt(this.map.getCanvas().style.height);t.style.width=this.map.getCanvas().style.width;t.style.height=this.map.getCanvas().style.height;var a=typeof window==="undefined"?{}:window;var r=this.devicePixelRatio=a.devicePixelRatio;if(this.mapVOptions.context=="2d"){t.getContext(this.mapVOptions.context).scale(r,r)}return t}},{key:"setVisible",value:function e(t){if(t){$(this._maptalksEle.container).show();this.visible=true}else{$(this._maptalksEle.container).hide();this.visible=false}}},{key:"destroy",value:function e(t){this._maptalksEle.remove()}},{key:"render",value:function e(t){this.source.map=this.map;var a=new GeoGlobe.MaptalksEle({elmapOptions:{spatialReference:this.jemap.spatialReference}}),r=this;this._maptalksEle=a;a.addTo(this.map);var i=a.getElMap(),n=[];for(var o=0;o<this.datasets.length;o++){new mapv.MaptalksLayer("mapv"+o,this.datasets[o],this.mapVOptions[o]).addTo(i)}return;var s=new mapv.MaptalksLayer("mapv",this.datasets[0],this.mapVOptions[0]).addTo(i);var l=new mapv.MaptalksLayer("mapv1",this.datasets[1],this.mapVOptions[1]).addTo(i);var c=this.map;this.canvas=this._createCanvas();this.mapContainer=c.getCanvasContainer();this.mapContainer.appendChild(this.canvas);this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.ctx=this.canvas.getContext("2d");this.data=this.dataSet.get();this.options=this.mapVOptions;this.drawAnimation()}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});a.d(t,"je",function(){return m});var r=a(3);var i=a(4);var n=a(5);var o=a(1);var s=a(6);var l=a(7);var c=a(8);var u=a(9);var h=a(10);var p=a(11);var f=a(12);var d=a(14);var y=a(15);var v=a(16);var m={x:{Map:r["a"],extent:y,util:{coordtransform:v["a"]},ui:{},source:{WMTS:h["a"],WFS:p["a"],GeoJSON:f["a"],Raster:d["a"]},layer:{Tile:i["a"],VectorTile:n["a"],MapV:o["a"],Vector:s["a"],StatisticalChart:l["a"],Heatmap:c["a"],Migrate:u["a"]}},CONTEXT_ROOT:"/jfw",PROXY_URL:"http://"+window.location.host+"/ProxyServlet/proxyHandler?url=",version:"0.0.4.20180312"};window.je=m},function(e,t,a){"use strict";var r=function(){function e(t){_classCallCheck(this,e);this.delegate_map=null;this.mapCRS=null;this.Z_INDEX_BASE={BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3};this.spatialReference={projection:"EPSG:4490"};this.attributes={mapCRS:{topTileExtent:[-180,-270,180,90],coordtransform:"none"},style:{version:8,sources:{},layers:[]},container:t.el,renderWorldCopies:false};$.extend(this.attributes,t);delete this.attributes.el;this.el=t.el;this.$el=$("#"+t.el);this.layers=[];GeoGlobe.Request.setProxyHost(je.PROXY_URL);if(!t.map){this._init_delegate_map(t)}else{this.delegate_map=t.map}}_createClass(e,[{key:"_init_delegate_map",value:function e(t){console.log(this.attributes);this.delegate_map=new GeoGlobe.Map(this.attributes);if(this.attributes.mapCRS==null){this.spatialReference.projection="EPSG:3857"}else{}}},{key:"on",value:function e(t,a){this.delegate_map.on(t,a)}},{key:"addLayer",value:function e(t){t.map=this.delegate_map;t.jemap=this;t.render(t);this.layers.push(t);t.zIndex=this.layers.length}},{key:"moveLayer",value:function e(t,a){var r=this._getMoveLayerId(t,false);var i=this._getMoveLayerId(a,true);this.delegate_map.moveLayer(r,i)}},{key:"_getMoveLayerId",value:function e(t,a){var r="",i=t.CLASS_NAME;switch(i){case"x.layer.Tile":r="overlayer_"+t.id;break;case"x.layer.VectorTile":var n=a?0:t._layer_data.length-1;r=t._layer_data[n].id;break}return r}},{key:"removeLayer",value:function e(t){t.destroy(t);_.remove(this.layers,function(e){return e==t})}},{key:"setCenter",value:function e(t){this.delegate_map.setCenter(t)}},{key:"setBearing",value:function e(t){this.delegate_map.setBearing(t)}},{key:"setPitch",value:function e(t){this.delegate_map.setPitch(t)}},{key:"zoomTo",value:function e(t){this.delegate_map.setZoom(t)}},{key:"getLayer",value:function e(t){return this.delegate_map.getLayer(t)}},{key:"getLayerById",value:function e(t){for(var a=0;a<this.layers.length;a++){var r=this.layers[a];if(r.id==t){return r}}}},{key:"getLayerBy",value:function e(){}},{key:"updateSize",value:function e(){this.delegate_map.resize()}},{key:"setLayerZIndex",value:function e(t,a){t.setZIndex(this.Z_INDEX_BASE["Overlay"]+a*5)}},{key:"render",value:function e(){}}]);return e}();t["a"]=r},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a._option=e;a.id=e.id;a._id="overlayer_"+e.id;a.attributes={id:a._id,type:"raster",source:e.source.attributes,name:e.name,minzoom:a.minZoom,maxzoom:a.maxZoom,paint:{"raster-opacity":Number(e.source.options.Opacity)}};a.CLASS_NAME="x.layer.Tile";return a}_createClass(t,[{key:"clone",value:function e(){return new je.x.layer.Tile(this._option)}},{key:"destroy",value:function e(t){var a=this;var r=this.attributes.id;try{this.map.removeSource(r);this.map.removeLayer(r)}catch(e){}}},{key:"render",value:function e(t){var a=this;try{if(this.source.wmts_obj==null){this.map.addLayer(t.attributes)}else{this.map.addLayer(this.source.wmts_obj)}}catch(e){this.map.on("load",function(){a.map.addLayer(t.attributes)})}}},{key:"getTopTileExtent",value:function e(){var t=this.source.options;var a={scales:t.Scales,tileOrigin:t.TileOrigin,tileFullExtent:t.TileFullExtent,zoomOffset:t.ZoomOffset,unit:"m"};var r=parseFloat(a.scales[0]);var i=GeoGlobe.Util.getResolutionFromScale(r,a.unit);var n=i*Math.pow(2,a.zoomOffset);var o=parseFloat(a.tileOrigin.split(",")[0]),s=parseFloat(a.tileOrigin.split(",")[1]),l=o+n*256,c=s-n*256;var u=a.tileOrigin.split(",");return[o,c,l,s]}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.source=e.source;a._id="overlayer_"+e.id;a.id=e.id;a.attributes={id:a.id,type:"raster",source:e.source.attributes,name:e.name,"raster-opacity":1};a._layer_data=[];a.CLASS_NAME="x.layer.VectorTile";return a}_createClass(t,[{key:"setVisible",value:function e(t){var a=this.jemap.delegate_map;for(var r=0;r<this._layer_data.length;r++){a.setLayoutProperty(this._layer_data[r]["id"],"visibility",t?"visible":"none")}}},{key:"destroy",value:function e(t){var a=this;for(var r=0;r<a._layer_data.length;r++){var i=a._layer_data[r].id;try{this.map.removeLayer(i)}catch(e){}}this.map.removeSource(this.source_id)}},{key:"render",value:function e(t){var a=this;try{var r=a.attributes.source;if(r.sprite!=""){sprite=je.PROXY_URL+r.sprite;a.map.loadSprite(sprite)}if(r.glyphs!=""){glyphs=je.PROXY_URL+r.glyphs;a.map.style.glyphManager.setURL(glyphs)}Layer_data=a.attributes.source.layerData;a.map.addLayer(Layer_data);Sourceid=Layer_data.source_id;LayerId=[];for(var i=0;i<Layer_data.layers.length;i++){LayerId.push(Layer_data.layers[i].id)}a.source_id=Sourceid;a._layer_data=Layer_data.layers}catch(e){console.log(e)}}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=0,i=[];a._id=GeoGlobe.Util.randomStr(6);a.color=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"];a.label={show:true,text:"",textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12}};$.extend(a.color,e.color);$.extend(a.label,e.label);a.color.forEach(function(e){i.push([r,e]);r++});if(a.type=="fill"){a.paint={"fill-color":{stops:i,property:"_je_vector_color_index"}}}else if(a.type=="fill-extrusion"){a.paint={"fill-extrusion-color":{stops:i,property:"_je_vector_color_index"}}}else{a.paint={}}$.extend(a.paint,e.paint);a.EVENT_TYPE=[];a.CLASS_NAME="x.layer.Vector";return a}_createClass(t,[{key:"destroy",value:function e(t){var a=this;a.map.removeSource("je-vector-source-"+a._id);a.map.removeLayer("je-vector-layer-"+a._id)}},{key:"render",value:function e(t){var a=this;this.source.getData(function(e){var t=0;e.features.forEach(function(e){e.properties["_je_vector_color_index"]=t;t++;t=t>a.color.length?0:t;var r=je.x.extent.boundingExtent(e.geometry.coordinates[0]);var i=je.x.extent.getCenter(r);var n=e.properties[a.label.text];if(n){console.log(e);console.log(n);console.log(r);console.log(i);var o=new mapboxgl.Marker;o.setLngLat(i);o.addTo(a.map);o._element.innerHTML=n;var s=a.label.textStyle;$(o._element).css({color:s.color,display:a.label.show?"block":"none","font-style":s.fontStyle,"font-weight":s.fontWeight,"font-family":s.fontFamily,"font-size":s.fontSize+"px"})}});a.map.addSource("je-vector-source-"+a._id,{type:"geojson",data:e});a.map.addLayer({id:"je-vector-layer-"+a._id,source:"je-vector-source-"+a._id,type:a.type,paint:a.paint})})}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.color=["#0960a3","#0081d2","#00d6e0","#01aae1","#00d3aa","#8bd36d","#63b44b"];a.width=260;a.height=120;$.extend(a,e);a.markers=[];a.CLASS_NAME="x.layer.StatisticalChart";return a}_createClass(t,[{key:"destroy",value:function e(){this.clearLayer();$(".graphList").remove()}},{key:"render",value:function e(){var t=this;if(this.source){this.source.getData(function(e){t.data=e;t.creatGraphList();t.bindEvent();t.createBarThemeLayer(t)})}else{this.creatGraphList();this.bindEvent();this.createBarThemeLayer(this)}}},{key:"_render",value:function e(t,a){var r=new mapboxgl.Marker;r.setLngLat(t.geometry.coordinates);r.addTo(this.map);var i=r._element;$(i).addClass("graphTheme");$(i).css({width:this.width,height:this.height,"border-radius":"5px"});var n;if(a&&a==="Bar"){n=this.createBarOption(t)}else if(a&&a==="Bar3D"){n=this.createBar3DOption(t)}else if(a&&a==="Line"){n=this.createLineOption(t)}else if(a&&a==="Point"){n=this.createPointOption(t)}else if(a&&a==="Pie"){n=this.createPieOption(t)}else if(a&&a==="Circular"){n=this.createCircularOption(t)}if(a==="Bar3D"){Highcharts.chart(i,n)}else{var o=echarts.init(i);o.setOption(n)}this.markers.push(r)}},{key:"clearLayer",value:function e(){$.each(this.markers,function(e,t){t.remove()});this.markers=[];try{this.map.removeControl(this.legendControl)}catch(e){}}},{key:"bindEvent",value:function e(){var t=this;$(".graph").on("click",function(){$(".graph").removeClass("active");t.clearLayer()});$(".graphList").on("click","#bar",function(){$("#bar").addClass("active");t.createBarThemeLayer(t)});$(".graphList").on("click","#bar3d",function(){$("#bar3d").addClass("active");t.createBar3DThemeLayer(t)});$(".graphList").on("click","#line",function(){$("#line").addClass("active");t.createLineThemeLayer(t)});$(".graphList").on("click","#point",function(){$("#point").addClass("active");t.createPointThemeLayer(t)});$(".graphList").on("click","#pie",function(){$("#pie").addClass("active");t.createPieThemeLayer(t)});$(".graphList").on("click","#circular",function(){t.createCircularThemeLayer(t)});t.jemap.delegate_map.on("render",function(){t.freshCharts(t)})}},{key:"createBarThemeLayer",value:function e(t){t.data.features.forEach(function(e){return t._render(e,"Bar")});t.freshCharts(t)}},{key:"createBar3DThemeLayer",value:function e(t){t.data.features.forEach(function(e){var a=[];e.properties.data.forEach(function(e,t){return a.push([t,0,e])});e.properties.data2=a;t._render(e,"Bar3D")});t.freshCharts(t)}},{key:"createLineThemeLayer",value:function e(t){t.data.features.forEach(function(e){return t._render(e,"Line")});t.freshCharts(t)}},{key:"createPointThemeLayer",value:function e(t){t.data.features.forEach(function(e){var a=[];e.properties.data.forEach(function(e,t){return a.push([t,e])});e.properties.data3=a;t._render(e,"Point")});t.freshCharts(t)}},{key:"createPieThemeLayer",value:function e(t){t.data.features.forEach(function(e){var a=[];e.properties.data.forEach(function(e,r){a.push({value:e,name:t.axisXLabels[r]})});e.properties.data4=a;t._render(e,"Pie")});t.addLegend();t.freshCharts(t)}},{key:"createCircularThemeLayer",value:function e(t){t.data.features.forEach(function(e){var a=[];e.properties.data.forEach(function(e,r){a.push({value:e,name:t.axisXLabels[r]})});e.properties.data5=a;t._render(e,"Circular")});t.addLegend();t.freshCharts(t)}},{key:"creatGraphList",value:function e(){var t=document.createElement("div");t.className="graphList";t.innerHTML="<button type='button' class='btn btn-default graph active' id='bar' data-toggle='tooltip' data-placement='bottom' title=\"柱状图\"></button>\n            <button type='button' class='btn btn-default graph' id='bar3d' data-toggle='tooltip' data-placement='bottom' title=\"三维柱状图\"></button>\n            <button type='button' class='btn btn-default graph' id='line' data-toggle='tooltip' data-placement='bottom' title=\"折线图\"></button>\n            <button type='button' class='btn btn-default graph' id='point' data-toggle='tooltip' data-placement='bottom' title=\"点状图\"></button>\n            <button type='button' class='btn btn-default graph' id='pie' data-toggle='tooltip' data-placement='bottom' title=\"饼状图\"></button>\n            <button type='button' class='btn btn-default graph' id='circular' data-toggle='tooltip' data-placement='bottom' title=\"环状图\"></button>";$(".mapboxgl-map").append(t);var a=document.createElement("style");a.type="text/css";a.innerHTML=".graphList{\n"+"    position: absolute;\n"+"    right: 5px;\n"+"    top: 8px;\n"+"    text-align: center;\n"+"    background: #FFF;\n"+"    z-index: 1000;\n"+"    border-radius: 4px;\n"+"}\n"+".btn{\n"+"    display: inline-block;\n"+"    padding: 6px 12px;\n"+"    margin-bottom: 0;\n"+"    font-size: 14px;\n"+"    font-weight: 400;\n"+"    line-height: 1.42857143;\n"+"    text-align: center;\n"+"    white-space: nowrap;\n"+"    vertical-align: middle;\n"+"    -ms-touch-action: manipulation;\n"+"    touch-action: manipulation;\n"+"    cursor: pointer;\n"+"    -webkit-user-select: none;\n"+"    -moz-user-select: none;\n"+"    -ms-user-select: none;\n"+"    user-select: none;\n"+"    background-image: none;\n"+"    border: 1px solid transparent;\n"+"    border-radius: 4px;\n"+"}\n"+".btn-default {\n"+"    color: #333;\n"+"    background-color: #fff;\n"+"    border-color: #ccc;\n"+"}\n"+".graph {\n"+"    margin: 5px;\n"+"    width: 26px;\n"+"    height: 26px;\n"+"    border-radius: 4px;\n"+"    background-size: 100%;\n"+"}\n"+".btn-default.active, .btn-default:active, .open>.dropdown-toggle.btn-default {\n"+"    color: #333;\n"+"    background-color: #e6e6e6;\n"+"    border-color: #adadad;\n"+"}\n"+"#bar{\n"+'    background-image: url("images/graphTheme/bar.png");\n'+"}\n"+"#bar3d{\n"+'     background-image: url("images/graphTheme/3Dbar.png");\n'+"}\n"+"#line{\n"+'    background-image: url("images/graphTheme/line.png");\n'+"}\n"+"#point{\n"+'    background-image: url("images/graphTheme/point.png");\n'+"}\n"+"#pie{\n"+'    background-image: url("images/graphTheme/pie.png");\n'+"}\n"+"#circular{\n"+'    background-image: url("images/graphTheme/circular.png");\n'+"}\n"+".graphTheme{\n"+"    margin-top: -60px;\n"+"}";$("head")[0].appendChild(a)}},{key:"freshCharts",value:function e(t){var a=$(".graphTheme");for(var r=0,i=a.length;r<i;r++){var n=a[r];var o=n.style.transform.match(/-?\d+(\.\d+)?/g);var s=[parseFloat(o[2]),parseFloat(o[3])];var l=[];var c={};c.x=s[0]-t.width/2;c.y=s[1]-t.height/2;var u={};u.x=s[0]+t.width/2;u.y=s[1]-t.height/2;var h={};h.x=s[0]+t.width/2;h.y=s[1]+t.height/2;var p={};p.x=s[0]-t.width/2;p.y=s[1]+t.height/2;var f=c;l.push(c,u,h,p,f);n.bounds=l}for(var d=a.length,y=d-1;y>=0;y--){var v=a[y];var m=false;for(var g=y-1;g>=0;g--){if(t.isOverLay(v.bounds,a[g].bounds)){m=true;break}}if(m){v.style.display="none"}else{v.style.display=""}}}},{key:"isOverLay",value:function e(t,a){var r=t.length,i=a.length;if(r!==5||i!==5){return null}var n=false;for(var o=0;o<r;o++){if(this.isPointInPoly(t[o],a)){n=true;break}}for(var o=0;o<i;o++){if(this.isPointInPoly(a[o],t)){n=true;break}}return n}},{key:"isPointInPoly",value:function e(t,a){for(var r=false,i=-1,n=a.length,o=n-1;++i<n;o=i){(a[i].y<=t.y&&t.y<a[o].y||a[o].y<=t.y&&t.y<a[i].y)&&t.x<(a[o].x-a[i].x)*(t.y-a[i].y)/(a[o].y-a[i].y)+a[i].x&&(r=!r)}return r}},{key:"createBarOption",value:function e(t){var a=this;var r={color:this.color,tooltip:{trigger:"item",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b}: {c}"},grid:{left:5,bottom:20,right:5,top:5},xAxis:{type:"category",axisTick:{show:false},data:this.axisXLabels,axisLabel:{textStyle:{color:"#fff",fontSize:14}},axisLine:{show:false}},yAxis:{show:false,type:"value"},legend:{show:false},series:[{name:t.properties.NAME+this.name,type:"bar",itemStyle:{normal:{color:function e(t){var r=a.color;return r[t.dataIndex]}}},barMaxWidth:30,data:t.properties.data}]};return r}},{key:"createBar3DOption",value:function e(t){var a=this;var r={chart:{backgroundColor:"#d1eeee",type:"column",margin:20,marginBottom:25,marginRight:5,marginTop:5,options3d:{enabled:true,alpha:10,beta:5,depth:70,viewDistance:100,frame:{bottom:{size:10},side:{size:1,color:"transparent"},back:{size:1,color:"transparent"}}}},legend:{enabled:false},title:{text:null},credits:{enabled:false},plotOptions:{column:{depth:50}},xAxis:{gridLineColor:"#222523",categories:this.axisXLabels},yAxis:{gridLineColor:"#222523",tickAmount:5,title:{text:null}},zAxis:{tickAmount:5,gridLineColor:"#222523"},series:[{name:t.properties.NAME+this.name,data:t.properties.data}]};return r}},{key:"createLineOption",value:function e(t){var a=this;var r={color:this.color,backgroundColor:"#d1eeee",grid:{left:"20%",bottom:20,right:5,top:10},tooltip:{trigger:"axis",formatter:"{a} <br/>{b}: {c}"},xAxis:{type:"category",data:this.axisXLabels},yAxis:{type:"value"},series:[{name:t.properties.NAME+this.name,data:t.properties.data,itemStyle:{normal:{color:function e(t){var r=a.color;return r[t.dataIndex]}}},lineStyle:{color:"#64ff40"},symbolSize:10,type:"line"}]};return r}},{key:"createPointOption",value:function e(t){var a=this;var r={color:this.color,backgroundColor:"#d1eeee",tooltip:{trigger:"item",axisPointer:{type:"shadow"},formatter:"{a} <br/>{b}: {c}"},grid:{left:"20%",bottom:20,right:5,top:10},xAxis:{type:"category",axisTick:{show:false},data:this.axisXLabels},yAxis:{type:"value"},legend:{show:false},series:[{name:t.properties.NAME+this.name,symbolSize:20,data:t.properties.data3,itemStyle:{normal:{color:function e(t){var r=a.color;return r[t.dataIndex]}}},type:"scatter"}]};return r}},{key:"createPieOption",value:function e(t){var a=this;var r={color:this.color,backgroundColor:"rgba(209,238,238,0)",grid:{left:5,bottom:20,right:5,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{show:false,orient:"vertical",x:"right",data:this.axisXLabels},series:[{name:t.properties.NAME+this.name,type:"pie",radius:"70%",center:["50%","50%"],data:t.properties.data4,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{show:false},labelLine:{normal:{show:false}}}]};return r}},{key:"createCircularOption",value:function e(t){var a=this;var r={color:this.color,backgroundColor:"rgba(209,238,238,0)",grid:{left:"20%",bottom:20,right:5,top:10},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{show:false,orient:"vertical",x:"right",data:this.axisXLabels},series:[{name:t.properties.NAME+this.name,type:"pie",center:["50%","50%"],radius:["40%","70%"],avoidLabelOverlap:false,label:{normal:{show:false,position:"center"},emphasis:{show:false}},labelLine:{normal:{show:false}},data:t.properties.data5}]};return r}},{key:"addLegend",value:function e(){var t=this;function a(){}a.prototype.onAdd=function(){this.legend_container=document.createElement("div");var e="legend-vertical";this.legend_container.className="legend "+e;var a="<div class='legend-title'>图例</div>";var r="";t.axisXLabels.forEach(function(e,a){r+="<li><span style='background-color:"+t.color[a]+";'></span><span>"+e+"</span></li>"});var i="<div class='legend-content'>"+r+"</div>";this.legend_container.innerHTML=a+i;return this.legend_container};a.prototype.onRemove=function(){this.legend_container.parentNode.removeChild(this.legend_container)};var r=document.createElement("style");r.type="text/css";r.innerHTML="       .legend {\n"+"            display: inline-block;\n"+"            border-radius: 2px;\n"+"            margin-bottom: 5px;\n"+"            margin-right: 5px;"+"            font-size: 12px;\n"+"            color: rgba(0, 0, 0, 0.8);\n"+"            background-color: rgb(255, 255, 255);\n"+"        }\n"+"        .legend .legend-title {\n"+"            min-height: 14px;\n"+"            max-width: 500px;\n"+"            padding:6px 10px;\n"+"        }\n"+"        .legend-content{\n"+"            padding:6px 10px;\n"+"        }"+"       .legend ul {\n"+"            padding: 0;\n"+"            margin: 0 16px;\n"+"            height: 100%;\n"+"            display: block;\n"+"            list-style: none;\n"+"        }\n"+"        .legend li {\n"+"            vertical-align: middle;\n"+"            list-style-type:none;"+"        }\n"+"        .legend li span:first-child {\n"+"            vertical-align: middle;\n"+"        }\n"+"        .legend li span:last-child {\n"+"            line-height: 28px;\n"+"            max-width: 200px;\n"+"            vertical-align: middle;\n"+"            white-space: nowrap;\n"+"            overflow: hidden;\n"+"            text-overflow: ellipsis;\n"+"            -ms-text-overflow: ellipsis;\n"+"        }\n"+"       .legend-vertical li {\n"+"            height: 28px;\n"+"        }\n"+"        .legend-vertical li span:first-child {\n"+"            display: inline-block;\n"+"            width: 60px;\n"+"            height: 100%;\n"+"        }\n"+"        .legend-vertical li span:last-child {\n"+"            display: inline-block;\n"+"            margin-left: 16px;\n"+"            height: 100%;\n"+"        }";$("head")[0].appendChild(r);t.legendControl=new a;this.map.addControl(t.legendControl,"bottom-right")}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=a(0);var i=a(1);var n=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.visible=true;a.opacity=.8;a.radius=13;a.gradient={.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"};$.extend(a,e);a.CLASS_NAME="x.layer.Heatmap";return a}_createClass(t,[{key:"setVisible",value:function e(a){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setVisible",this).call(this,a)}},{key:"destroy",value:function e(a){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,a)}},{key:"render",value:function e(a){var r=this;var i=this;this.source.getData(function(e){var n=[];e.features.forEach(function(e){n.push({geometry:e.geometry,count:e.properties[i.source.columns[0]]})});var o=new mapv.DataSet(n);var s={size:i.radius,maxOpacity:i.opacity,gradient:i.gradient,max:50,draw:"heatmap"};i.datasets=[o];i.mapVOptions=[s];_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",r).call(r,a);i.setVisible(i.visible)});return;var n={id:"je-heatmap",type:"heatmap",source:"heatmap",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}};var i=this;i.map.addSource("heatmap",{type:"geojson",data:result});i.map.addLayer(n,"waterway-label")}}]);return t}(i["a"]);t["a"]=n},function(e,t,a){"use strict";var r=a(0);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.data=null;a.Moption={routeColor:"#04a2f6",routeWidth:.4,speed:6,flightSize:15,flightColor:"#04a2f6",fromPointColor:"#ff4754",fromPointSize:16,toPointColor:"#ffa535",toPointSize:16};a.series=[];a.res=null;a.EVENT_TYPES=["point_click"];$.extend(a.Moption,e.Moption);var r=a.Moption;a.RouteOption={name:"线路",type:"lines",coordinateSystem:"GLMap",zlevel:1,effect:{show:true,period:r.speed,trailLength:.7,color:"#fff",symbolSize:4},lineStyle:{normal:{color:r.routeColor,width:r.routeWidth,curveness:.2}}};a.FlyOption={name:"飞行器线路",coordinateSystem:"GLMap",type:"lines",zlevel:2,symbol:["none","arrow"],symbolSize:10,effect:{show:true,period:r.speed,trailLength:0,symbol:"path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z",symbolSize:r.flightSize},lineStyle:{normal:{color:r.flightColor,width:0,opacity:.5,curveness:.2}}};a.FromPointOption={name:"起点",type:"effectScatter",coordinateSystem:"GLMap",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:false,position:"right",formatter:"{b}"}},symbolSize:r.fromPointSize,itemStyle:{normal:{color:r.fromPointColor}}};a.ToPointOption={name:"终点",type:"effectScatter",coordinateSystem:"GLMap",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:false,position:"right",formatter:"{b}"}},symbolSize:r.toPointSize,itemStyle:{normal:{color:r.toPointColor}}};return a}_createClass(t,[{key:"destroy",value:function e(){this.echartslayer.remove()}},{key:"render",value:function e(){var t=this;this.source.getData(function(e){var a=[],r=1;e.features.forEach(function(e){var i={lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],text:"起点-"+r};var n=e.properties[t.source.columns[0]]
;n.forEach(function(e){a.push({from:i,to:{lng:e[0],lat:e[1],text:"终点-"+r}});r++});r++});t.data=a;t.convertData(t.data);var i=t.setOption();t.echartslayer=new EchartsLayer(t.map);t.echartslayer.chart.setOption(i);t.echartslayer.chart.on("click",function(e){if(e.seriesType=="effectScatter"){t.trigger("point_click",e)}})})}},{key:"convertData",value:function e(t){var a=this;var r=[],i=[];for(var n=0;n<t.length;n++){var o=t[n];var s=[parseFloat(t[n].from.lng),parseFloat(t[n].from.lat)];var l=[parseFloat(t[n].to.lng),parseFloat(t[n].to.lat)];if(s&&l){r.push({coords:[s,l]})}}a.res=r;return r}},{key:"makeSeries",value:function e(t){var a=this;var r=[];var i=[];a.RouteOption.data=a.res;a.FlyOption.data=a.res;a.data.forEach(function(e,t){var n=$.extend({},a.ToPointOption);n.data=[a.setPoint(e)];r.push(a.RouteOption,a.FlyOption,n);if(i.length==0){i.push(e.from)}else{var o=false;i.forEach(function(t){if(t.text==e.from.text){o=true}});if(!o){i.push(e.from)}}});var n=[];i.forEach(function(e){var t={name:e.text,value:[e.lng,e.lat,95]};n.push(t)});a.FromPointOption.data=n;r.push(a.FromPointOption);return r}},{key:"setOption",value:function e(){var t=this;var a={GLMap:{},coordinateSystem:"GLMap",title:{},legend:{},geo:{map:"GLMap",label:{emphasis:{show:true}},roam:true,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#404a59"},emphasis:{areaColor:"#2a333d"}}},series:t.makeSeries(t.data)};return a}},{key:"setPoint",value:function e(t){var a=t.to;return{name:a.text,value:[a.lng,a.lat,95]}}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=function(){function e(t){_classCallCheck(this,e);this.url=null;this.attributes=null;this.style=null;this.layerInf=null;this.wmts_obj=null;var a=t.Options;var r={layer:a.Layer,TILEMATRIX:"{z}",TILEROW:"{y}",TILECOL:"{x}",tileMatrixSet:a.MatrixSet,format:a.Format,version:t.Version,style:a.Style,width:256,height:256};var i=null,n=null,o={},s=this,l,c;if(t.Type=="OGC-WMTS"){i=new GeoGlobe.Service.WMTS(t.Name,t.Url);n=je.PROXY_URL+i.getTile(r);if(!a.Time){}else{n+="&TIME="+a.Time}if(!a.USERECENT){n+="&USERECENT=false"}else{n+="&USERECENT="+a.USERECENT}}else{i=new GeoGlobe.Service.VTS(t.Name,t.Url,{async:false});i.async=false;i.GetStyle(a.Style,function(e){if(e.sprite){l=je.PROXY_URL+e.sprite}else{l=""}if(e.glyphs){c=je.PROXY_URL+e.glyphs}else{c=""}var t=e;var r={layers:[],source:{},source_id:"",layerType:"VTS"};var n={layer:a.Layer,TILEMATRIX:"{z}",TILEROW:"{y}",TILECOL:"{x}",tileMatrixSet:a.MatrixSet,width:256,height:256,format:a.Format};var s=i.GetTile(n);var u="source_vts_"+GeoGlobe.Util.randomStr(6);r.source_id=u;r.source={type:"vector",tiles:[je.PROXY_URL+s]};if(t.styleData){for(var h=0;h<t.styleData.layers.length;h++){t.styleData.layers[h].source=u}r.layers=t.styleData.layers}else{for(var h=0;h<t.layers.length;h++){t.layers[h].source=u}r.layers=t.layers}o=r});n=je.PROXY_URL+i.GetTile(r)}this.attributes={type:"raster",tiles:[n],tileSize:256,sprite:l,glyphs:c,layerData:o};this.options=a;this.url=t.Url}_createClass(e,[{key:"getDimensions",value:function e(){}}]);return e}();t["a"]=r},function(e,t,a){"use strict";var r=function(){function e(t){_classCallCheck(this,e);this.attributes=t;this.version="1.0.0";this.maxFeatures=1e3;this.geometryName="GEOMETRY";this.order=true;$.extend(this,t);this.wfsQueryObj=new GeoGlobe.Query.WFSQuery(this.url,this.typeName,{geometryName:this.geometryName,format:this.version=="1.1.0"?new GeoGlobe.Format.GML.v3({xy:!this.order}):new GeoGlobe.Format.GML.v2({xy:true}),version:this.version,maxFeatures:this.maxFeatures})}_createClass(e,[{key:"getData",value:function e(){var t=arguments[0];if(_typeof(arguments[0])==="object"){this._updateWfsObj(arguments[0]);t=arguments[1]}var a=function e(a){t(a.geojson)};if(this.queryType=="bbox"){this.getBboxData(a)}else if(this.queryType=="point"){this.getPointData(this.param,a)}else if(this.queryType=="path"){this.getLineData(this.param,a)}else if(this.queryType=="polygon"){this.getPolygonData(this.param,a)}else if(this.queryType=="attribute"){this.getAttributeData(this.param,a)}else{alert("请检查查询方式是否正确！")}}},{key:"getBboxData",value:function e(t){var a={};if(this.lock){a=this.extent}if(this.extent){if(this.extent.type==="Polygon"){var r={polygon:this.extent};this.getPolygonData(r,t);return}else{var i=this.extent.coordinates;a=new GeoGlobe.LngLatBounds(i[0],i[1])}}else{a=new GeoGlobe.LngLatBounds([-180,-90],[180,90])}if(this.version=="1.1.0"){var n=a.toBBOX(null,this.order);a=GeoGlobe.LngLatBounds.fromString(n)}this.wfsQueryObj.bboxQuery(a,function(e){t(e)},function(e){console.log(e)})}},{key:"getPointData",value:function e(t,a){var r=new GeoGlobe.Geometry.Point(t.point.coordinates[0],t.point.coordinates[1]);if(this.version=="1.1.0"){r=new GeoGlobe.Geometry.Point(t.point.coordinates[1],t.point.coordinates[0])}this.wfsQueryObj.pointQuery(r,t.distance,t.unit,function(e){a(e)},function(e){console.log(e)})}},{key:"getLineData",value:function e(t,a){var r=[];t.path.coordinates.forEach(function(e,t){if(this.version=="1.1.0"){r.push(new GeoGlobe.Geometry.Point(e[1],e[0]))}else{r.push(new GeoGlobe.Geometry.Point(e[0],e[1]))}});var i=new GeoGlobe.Geometry.LineString(r);this.wfsQueryObj.pathQuery(i,t.distance,t.unit,function(e){a(e)},function(e){console.log(e)})}},{key:"getPolygonData",value:function e(t,a){if(!t.isContain){t.isContain=true}var r=[];t.polygon.coordinates.forEach(function(e,t){var a=[];e.forEach(function(e,t){if(this.version=="1.1.0"){a.push(new GeoGlobe.Geometry.Point(e[1],e[0]))}else{a.push(new GeoGlobe.Geometry.Point(e[0],e[1]))}});r.push(new GeoGlobe.Geometry.LinearRing(a))});var i=new GeoGlobe.Geometry.Polygon(r);this.wfsQueryObj.polygonQuery(i,t.isContain,function(e){a(e)},function(e){console.log(e)})}},{key:"getAttributeData",value:function e(t,a){var r="*"+t.value+"*";var i=GeoGlobe.Filter.Comparison.LIKE;if(!t.options){t.options=null}this.wfsQueryObj.attributeQuery(i,t.property,r,t.options,function(e){a(e)},function(e){console.log(e)})}},{key:"_updateWfsObj",value:function e(t){_.extend(this,t);var a=new GeoGlobe.Query.WFSQuery(this.url,this.typeName,{geometryName:this.geometryName,format:this.version=="1.1.0"?new GeoGlobe.Format.GML.v3({xy:!this.order}):new GeoGlobe.Format.GML.v2({xy:true}),version:this.version,maxFeatures:this.maxFeatures});this.wfsQueryObj=a}}]);return e}();t["a"]=r},function(e,t,a){"use strict";var r=a(13);var i=function(e){_inherits(t,e);function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.dataUpdate=null;$.extend(a,e);if(a.dataUpdate!=null){a.on("data_update",a.dataUpdate)}a.getData(function(){});return a}_createClass(t,[{key:"setData",value:function e(t,a){this.data=t;this._geojson=this.data;if(a){this.trigger("data_update",this.data);this.isForce=false}}},{key:"getData",value:function e(t,a){var r=this;$.extend(this.isForce,a);if(!this.url){this.setData(this.data,this.isForce);t(this.data);return}$.get(this.url,function(e){r.setData(e,r.isForce);try{t(e)}catch(e){console.error(e)}},"json")}},{key:"validate",value:function e(){}}]);return t}(r["a"]);t["a"]=i},function(e,t,a){"use strict";var r=function(){function e(t){_classCallCheck(this,e);this.isForce=true;this._geojson={};this.handleFunc={}}_createClass(e,[{key:"on",value:function e(t,a){if(this.handleFunc[t]){if(this.handleFunc[t].indexOf(a)===-1){this.handleFunc[t].push(a)}}else{this.handleFunc[t]=[a]}}},{key:"trigger",value:function e(t,a){try{var r=this.handleFunc[t];var i=r.length;for(var n=0;n<i;n++){r[n](a)}return true}catch(e){return false}}},{key:"off",value:function e(t,a){try{var r=this.handleFunc[t];var i=r.indexOf(a);if(i===-1)throw error;r.splice(i,1)}catch(e){}}},{key:"once",value:function e(t,a){this.on(t,a)?this.off(t,a):null}},{key:"getDataRange",value:function e(t){var a=0,r=0,i=0;this._geojson.features.forEach(function(e){var n=e.properties[t];if(a==0){r=n;i=n}if(n>i){i=n}else if(n<r){r=n}a++});return[r,i]}}]);return e}();t["a"]=r},function(e,t,a){"use strict";var r=function e(t){_classCallCheck(this,e);$.extend(this,t);var a=t.Options;var r=je.PROXY_URL+t.Url;this.attributes={type:"raster",tiles:[r],tileSize:256};this.options=a;this.url=t.Url};t["a"]=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["boundingExtent"]=r;t["buffer"]=i;t["containsCoordinate"]=n;t["containsExtent"]=o;t["containsXY"]=s;t["createEmpty"]=l;t["createOrUpdate"]=c;t["createOrUpdateEmpty"]=u;t["createOrUpdateFromCoordinate"]=h;t["createOrUpdateFromCoordinates"]=p;t["extend"]=f;t["extendCoordinate"]=d;t["extendCoordinates"]=y;t["extendFlatCoordinates"]=v;t["extendRings"]=m;t["extendXY"]=g;t["getMargin"]=b;t["getSize"]=_;t["getTopLeft"]=x;t["getTopRight"]=k;t["getBottomLeft"]=C;t["getBottomRight"]=L;t["getCenter"]=O;t["getWidth"]=w;t["getHeight"]=S;t["getCorner"]=P;t["intersects"]=M;t["isEmpty"]=T;function r(e){var t=this.createEmpty();for(var a=0,r=e.length;a<r;++a){this.extendCoordinate(t,e[a])}return t}function i(e,t,a){if(a){a[0]=e[0]-t;a[1]=e[1]-t;a[2]=e[2]+t;a[3]=e[3]+t;return a}else{return[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}}function n(e,t){return this.containsXY(e,t[0],t[1])}function o(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function s(e,t,a){return e[0]<=t&&t<=e[2]&&e[1]<=a&&a<=e[3]}function l(){return[Infinity,Infinity,-Infinity,-Infinity]}function c(e,t,a,r,i){if(i){i[0]=e;i[1]=t;i[2]=a;i[3]=r;return i}else{return[e,t,a,r]}}function u(e){return c(Infinity,Infinity,-Infinity,-Infinity,e)}function h(e,t){var a=e[0];var r=e[1];return c(a,r,a,r,t)}function p(e,t){var a=u(t);return y(a,e)}function f(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[2]>e[2]){e[2]=t[2]}if(t[1]<e[1]){e[1]=t[1]}if(t[3]>e[3]){e[3]=t[3]}return e}function d(e,t){if(t[0]<e[0]){e[0]=t[0]}if(t[0]>e[2]){e[2]=t[0]}if(t[1]<e[1]){e[1]=t[1]}if(t[1]>e[3]){e[3]=t[1]}}function y(e,t){for(var a=0,r=t.length;a<r;++a){this.extendCoordinate(e,t[a])}return e}function v(e,t,a,r,i){for(;a<r;a+=i){this.extendXY(e,t[a],t[a+1])}return e}function m(e,t){for(var a=0,r=t.length;a<r;++a){this.extendCoordinates(e,t[a])}return e}function g(e,t,a){e[0]=Math.min(e[0],t);e[1]=Math.min(e[1],a);e[2]=Math.max(e[2],t);e[3]=Math.max(e[3],a)}function b(e){return w(e)+S(e)}function _(e){return[e[2]-e[0],e[3]-e[1]]}function x(e){return[e[0],e[3]]}function k(e){return[e[2],e[3]]}function C(e){return[e[0],e[1]]}function L(e){return[e[2],e[1]]}function O(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function w(e){return e[2]-e[0]}function S(e){return e[3]-e[1]}function P(e,t){var a;if(t===Corner.BOTTOM_LEFT){a=C(e)}else if(t===Corner.BOTTOM_RIGHT){a=L(e)}else if(t===Corner.TOP_LEFT){a=x(e)}else if(t===Corner.TOP_RIGHT){a=k(e)}else{}return a}function M(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function T(e){return e[2]<e[0]||e[3]<e[1]}},function(e,t,a){"use strict";var r={x_PI:3.141592653589793*3e3/180,PI:3.141592653589793,a:6378245,ee:.006693421622965943,bd09togcj02:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var t=+t;var a=+a;var s=t-.0065;var l=a-.006;var c=Math.sqrt(s*s+l*l)-2e-5*Math.sin(l*r);var u=Math.atan2(l,s)-3e-6*Math.cos(s*r);var h=c*Math.cos(u);var p=c*Math.sin(u);return[h,p]},gcj02tobd09:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var a=+a;var t=+t;var s=Math.sqrt(t*t+a*a)+2e-5*Math.sin(a*r);var l=Math.atan2(a,t)+3e-6*Math.cos(t*r);var c=s*Math.cos(l)+.0065;var u=s*Math.sin(l)+.006;return[c,u]},wgs84togcj02:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var a=+a;var t=+t;if(out_of_china(t,a)){return[t,a]}else{var s=transformlat(t-105,a-35);var l=transformlng(t-105,a-35);var c=a/180*i;var u=Math.sin(c);u=1-o*u*u;var h=Math.sqrt(u);s=s*180/(n*(1-o)/(u*h)*i);l=l*180/(n/h*Math.cos(c)*i);var p=a+s;var f=t+l;return[f,p]}},gcj02towgs84:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var a=+a;var t=+t;if(out_of_china(t,a)){return[t,a]}else{var s=transformlat(t-105,a-35);var l=transformlng(t-105,a-35);var c=a/180*i;var u=Math.sin(c);u=1-o*u*u;var h=Math.sqrt(u);s=s*180/(n*(1-o)/(u*h)*i);l=l*180/(n/h*Math.cos(c)*i);var p=a+s;var f=t+l;return[t*2-f,a*2-p]}},transformlat:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var a=+a;var t=+t;var s=-100+2*t+3*a+.2*a*a+.1*t*a+.2*Math.sqrt(Math.abs(t));s+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3;s+=(20*Math.sin(a*i)+40*Math.sin(a/3*i))*2/3;s+=(160*Math.sin(a/12*i)+320*Math.sin(a*i/30))*2/3;return s},transformlng:function e(t,a){var r=this.x_PI;var i=this.PI;var n=this.a;var o=this.ee;var a=+a;var t=+t;var s=300+t+2*a+.1*t*t+.1*t*a+.1*Math.sqrt(Math.abs(t));s+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3;s+=(20*Math.sin(t*i)+40*Math.sin(t/3*i))*2/3;s+=(150*Math.sin(t/12*i)+300*Math.sin(t/30*i))*2/3;return s},out_of_china:function e(t,a){var a=+a;var t=+t;return!(t>73.66&&t<135.05&&a>3.86&&a<53.55)}};t["a"]=r}]);